!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.MiniModal=n()}(this,function(){"use strict";var e={},n=function(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]},t=function(e,n){var t=document.querySelectorAll(n),o=void 0,r=e;do for(o=t.length;--o>=0&&t.item(o)!==r;);while(o<0&&(r=r.parentElement));return r},o=function(e){e.preventDefault(),e.stopPropagation()},r={bodyOpenClass:"mini-modal-active",openClass:"is-open",closeAttr:"data-close",overlayAttr:"data-overlay",contentAttr:"data-content",escClose:!0,backgroundClickClose:!0,openImmediately:!1,moveToBodyEnd:!0},i=void 0;return e.create=function(c,l){var s={},a={},d=n({},r,l),u=function(e){return t(e.target,"["+d.closeAttr+"]")?(s.close(),void o(e)):void(d.backgroundClickClose&&t(e.target,"["+d.overlayAttr+"]")&&(s.close(),o(e)))},f=function(e){d.escClose&&"Escape"===e.code&&s.close()},m=function(){c.addEventListener("click",u),document.addEventListener("keyup",f)},p=function(){c.removeEventListener("click",u),document.removeEventListener("keyup",f)},v=function(e){a.hasOwnProperty(e)&&a[e]({modal:c,modalContent:c.querySelector("["+d.contentAttr+"]")})};if(s.open=function(){e.close(),m(),setTimeout(function(){v("beforeOpen"),c.addEventListener("transitionend",function e(){i=s,v("afterOpen"),c.removeEventListener("transitionend",e)}),document.documentElement.classList.add(d.bodyOpenClass),c.classList.add(d.openClass)},0)},s.close=function(){v("beforeClose"),c.classList.remove(d.openClass),document.documentElement.classList.remove(d.bodyOpenClass),p(),i=null,v("afterClose")},s.on=function(e,n){return a.hasOwnProperty(e)||(a[e]=n),s},s.off=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e?a={}:a.hasOwnProperty(e)&&delete a[e],s},"string"==typeof c&&(c=document.getElementById(c)),!(c instanceof HTMLElement))throw new Error("MiniModal container element not found.");return d.moveToBodyEnd&&document.body.appendChild(c),d.openImmediately&&s.open(),s},e.close=function(){i&&i.close(),i=null},e.open=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.close(),e.create(t,n(o,{openImmediately:!0}))},e.getActiveModal=function(){return i},e});