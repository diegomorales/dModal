!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.dModal=t()}(this,function(){"use strict";function e(e){return this.settings=l({},e,s),this.modal=document.getElementById(e.modalId),this.modalOverlay=this.modal.querySelector(this.settings.modalOverlay),this.modalContent=this.modal.querySelector(this.settings.modalContent),this.modalCloseBtn=this.modal.querySelector(this.settings.modalCloseBtn),this.onBeforeOpen=e.onBeforeOpen||d,this.onBeforeClose=e.onBeforeClose||a,this.modal?(o.appendChild(this.modal),this.open(),this.close=n.bind(this),this.escCloseHandler=i.bind(this),this.modalCloseBtn.addEventListener("click",this.close),this.settings.escClose&&o.addEventListener("keyup",this.escCloseHandler),void(this.settings.backgroundClickClose&&this.modalOverlay.addEventListener("click",this.close))):{error:'modal dialog with id "'+e.modalId+'" not found.'}}var t={},s={modalOverlay:".d-modal-overlay",modalContent:".d-modal-content",modalCloseBtn:".d-modal-close",bodyOpenClass:"d-modal-open",modalOpenClass:"open",backgroundClickClose:!0,escClose:!0},o=document.body,n=function(){this.onBeforeClose(this.modal),this.modal.classList.remove(this.settings.modalOpenClass),o.classList.remove(this.settings.bodyOpenClass),this.modalCloseBtn.removeEventListener("click",this.close),this.modalOverlay.removeEventListener("click",this.close),o.removeEventListener("keyup",this.escCloseHandler)},i=function(e){27===e.keyCode&&this.close(),e.preventDefault()},l=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},d=function(){},a=function(){};return e.prototype.open=function(){setTimeout(function(){this.onBeforeOpen(this.modal),o.classList.add(this.settings.bodyOpenClass),this.modal.classList.add(this.settings.modalOpenClass)}.bind(this),10)},t.open=function(t){return new e(t)},t});