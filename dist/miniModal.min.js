!function(e,o){"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?module.exports=o():e.MiniModal=o()}(this,function(){"use strict";var e,o={},n={modalOverlayClass:"mini-modal__overlay",modalContentClass:"mini-modal__content",modalCloseBtnClass:"mini-modal__close",bodyOpenClass:"mini-modal-active",modalOpenClass:"mini-modal--open",backgroundClickClose:!0,escClose:!0,openImmediately:!1,moveToBodyEnd:!0,onInit:function(){},onBeforeOpen:function(){},onBeforeClose:function(){}},l={modalOverlay:"[data-mini-modal-overlay]",modalContent:"[data-mini-modal-content]",modalCloseBtn:"[data-mini-modal-close]"},t=document,a=t.documentElement.classList?function(e,o){e.classList.add(o)}:function(e,o){e.className+=" "+o},d=t.documentElement.classList?function(e,o){e.classList.remove(o)}:function(e,o){var n=e.className.split(" "),l=n.indexOf(o);l>-1&&n.splice(l,1),e.className=n.join(" ")},s=function(){for(var e=1;e<arguments.length;e++)for(var o in arguments[e])arguments[e].hasOwnProperty(o)&&(arguments[0][o]=arguments[e][o]);return arguments[0]};return o.create=function(i,m){var c=s({},n,m),r={};if(!(r.modal=document.getElementById(i)))throw new Error('Element with id "'+i+'" not found.');r.modalOverlay=r.modal.querySelector(l.modalOverlay),r.modalContent=r.modal.querySelector(l.modalContent),r.modalCloseBtn=r.modal.querySelector(l.modalCloseBtn),a(r.modalOverlay,c.modalOverlayClass),a(r.modalContent,c.modalContentClass),a(r.modalCloseBtn,c.modalCloseBtnClass);var u=function(){r.modalCloseBtn.addEventListener("click",r.close),c.escClose&&t.body.addEventListener("keyup",C),c.backgroundClickClose&&r.modalOverlay.addEventListener("click",r.close)},f=function(){r.modalCloseBtn.removeEventListener("click",r.close),r.modalOverlay.removeEventListener("click",r.close),t.body.removeEventListener("keyup",C)},C=function(e){27===e.keyCode&&r.close(),e.preventDefault()};return r.open=function(){o.close(),u(),setTimeout(function(){c.onBeforeOpen(r),a(t.body,c.bodyOpenClass),a(r.modal,c.modalOpenClass),e=r},10)},r.close=function(){arguments[0]&&arguments[0].preventDefault&&arguments[0].preventDefault(),c.onBeforeClose(r)!==!1&&(d(r.modal,c.modalOpenClass),d(t.body,c.bodyOpenClass),f(),e=null)},c.onInit(r),c.moveToBodyEnd&&t.body.appendChild(r.modal),c.openImmediately&&r.open(),r},o.close=function(){e&&e.close(),e=null},o.open=function(e,n){return o.close(),o.create(e,s(n||{},{openImmediately:!0}))},o.getActiveModal=function(){return e},o});